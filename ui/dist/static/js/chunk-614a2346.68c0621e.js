(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-614a2346"],{"29b9":function(t,e,a){},"5fd4":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"n",(function(){return i})),a.d(e,"i",(function(){return c})),a.d(e,"g",(function(){return o})),a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return u})),a.d(e,"c",(function(){return l})),a.d(e,"e",(function(){return h})),a.d(e,"m",(function(){return d})),a.d(e,"f",(function(){return m})),a.d(e,"k",(function(){return f})),a.d(e,"j",(function(){return p})),a.d(e,"h",(function(){return b})),a.d(e,"l",(function(){return g}));var n=a("b775");function r(t){return Object(n["a"])({url:"/rest/bi/dashboard/create",method:"POST",data:t})}function i(t){return Object(n["a"])({url:"/rest/bi/dashboard/update",method:"put",data:t})}function c(t){return Object(n["a"])({url:"/rest/bi/dashboard/query/".concat(t)})}function o(t){return Object(n["a"])({url:"/rest/bi/dashboard/delete",method:"delete",params:t})}function s(t){return Object(n["a"])({url:"/rest/bi/dashboard/list/".concat(t)})}function u(t){return Object(n["a"])({url:"/rest/bi/dashboard/map",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/rest/bi/dashboard/chartByDashboard/".concat(t)})}function h(t){return Object(n["a"])({url:"/rest/bi/dashboard/boardbychart?chartId=".concat(t)})}function d(t){return Object(n["a"])({url:"/rest/bi/dashboard/unmap",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/rest/bi/dashboard/order",method:"POST",data:t})}function f(t){return Object(n["a"])({url:"/rest/bi/dashboard/publictree/".concat(t)})}function p(t){return Object(n["a"])({url:"/rest/bi/dashboard/mytree/".concat(t)})}function b(){return Object(n["a"])({url:"/rest/share/list"})}function g(t){return Object(n["a"])({url:"/rest/share/add",method:"get",params:t})}},"6b47":function(t,e,a){},8034:function(t,e,a){"use strict";a("6b47")},"943b":function(t,e,a){"use strict";a("29b9")},a5e0:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return c}));a("a481"),a("28a5"),a("7f7f"),a("7514");var n=a("aa35");function r(t){var e;return e=t.indexOf("(")>=0?n["a"].find((function(e){return e.name===t.split("(")[0]})):n["a"].find((function(e){return e.name===t})),e}function i(t){var e,a,n,i=t.dataSrc,c=t.selectedCalcul,o=t.selectedDimension,s=t.orderByStrs,u=t.filterStr,l=t.limit,h=[],d=[],m=[];if(m=m.concat(c).concat(o),h=m.map((function(t){var e=c.find((function(e){return e.Column===t.Column}));return e&&"none"!==e.calculFunc?"distinct"==e.calculFunc?"count(distinct ".concat(e.Column,") as ").concat(e.Column):"".concat(e.calculFunc||r(e.Type).availableFunc[0],"(").concat(e.Column,") as ").concat(e.Column):(d.push(t.Column),t.Column)})),0!==h.length&&i)return d.length>0&&(e="GROUP BY ".concat(d.join())),s.length>0&&(a="ORDER BY ".concat(s.join())),u&&(u=u.replace(/>/g,"&lt;"),u=u.replace(/</g,"&gt;"),n="where ".concat(u)),"SELECT ".concat(h.join()," FROM ").concat(i," ").concat(n||""," ").concat(e||""," ").concat(a||""," LIMIT ").concat(l||200)}function c(t){var e,a=t.value;return r(t.colType).needQuotation&&(a=n(t.value,t)),e=1===t.operatorParamNum?"".concat(t.filteCol," ").concat(t.filterOperator," ").concat(a.value1):2===t.operatorParamNum?"".concat(t.filteCol," ").concat(t.filterOperator," ").concat(a.value1," and ").concat(a.value2):"".concat(t.filteCol," ").concat(t.filterOperator," ('").concat(a.arrValue.join(","),"')"),e;function n(t,e){var a=e.colType;return"varchar"!=a&&"varchar2"!=a&&"tinytext"!=a&&"text"!=a&&"mediumtext"!=a&&"longtext"!=a?{value1:"".concat(t.value1),value2:"".concat(t.value2),arrValue:t.arrValue.map((function(t){return"".concat(t)}))}:{value1:"'".concat(t.value1,"'"),value2:"'".concat(t.value2,"'"),arrValue:t.arrValue.map((function(t){return"'".concat(t,"'")}))}}}},aa35:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return s}));a("7f7f");var n=a("5530"),r=a("9225"),i={sum:r["a"].t("config.sum"),avg:r["a"].t("config.avg"),max:r["a"].t("config.max"),min:r["a"].t("config.min"),count:r["a"].t("config.count"),distinct:r["a"].t("config.distinct"),none:r["a"].t("config.none")},c=[{operator:"=",name:"config.is",paramNum:1},{operator:">",name:"config.greater",paramNum:1},{operator:"<",name:"config.less",paramNum:1},{operator:">=",name:"config.greaterOrEqual",paramNum:1},{operator:"<=",name:"config.lessorEqual",paramNum:1},{operator:"!=",name:"config.isNot",paramNum:1},{operator:"BETWEEN",name:"config.between",paramNum:2},{operator:"IN",name:"config.in",paramNum:-1},{operator:"LIKE",name:"config.like",paramNum:1}];function o(){return c.map((function(t){var e=Object(n["a"])({},t);return e.name=r["a"].t(t.name),e}))}var s=[{name:"tinyint",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none","distinct"]},{name:"smallint",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"mediumint",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"int",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none","distinct"]},{name:"bigint",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"float",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"double",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"real",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"decimal",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"timestamp",needQuotation:!1,availableFunc:["count","none","distinct"]},{name:"date",needQuotation:!0,availableFunc:["count","none","distinct"]},{name:"time",needQuotation:!0,availableFunc:["count","none","distinct"]},{name:"datetime",needQuotation:!0,availableFunc:["count","none","distinct"]},{name:"year",needQuotation:!0,availableFunc:["count","none","distinct"]},{name:"char",needQuotation:!0,availableFunc:["count","none","distinct"]},{name:"varchar",needQuotation:!0,availableFunc:["count","none","distinct"]},{name:"varchar2",needQuotation:!0,availableFunc:["count","none","distinct"]},{name:"tinytext",needQuotation:!0,availableFunc:["count","none","distinct"]},{name:"text",needQuotation:!0,availableFunc:["count","none","distinct"]},{name:"mediumtext",needQuotation:!0,availableFunc:["count","none","distinct"]},{name:"longtext",needQuotation:!0,availableFunc:["count","none","distinct"]},{name:"integer",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]}]},b414:function(t,e,a){"use strict";a.d(e,"k",(function(){return i})),a.d(e,"a",(function(){return c})),a.d(e,"e",(function(){return o})),a.d(e,"n",(function(){return s})),a.d(e,"c",(function(){return u})),a.d(e,"d",(function(){return l})),a.d(e,"m",(function(){return h})),a.d(e,"f",(function(){return d})),a.d(e,"g",(function(){return m})),a.d(e,"l",(function(){return f})),a.d(e,"i",(function(){return p})),a.d(e,"j",(function(){return b})),a.d(e,"b",(function(){return g})),a.d(e,"h",(function(){return y}));var n=a("b775"),r=a("a0ce");function i(t){return Object(n["a"])({url:"/rest/bi/datasource/sync/"+Object(r["d"])(t),method:"get"})}function c(t){return Object(n["a"])({url:"/rest/bi/datasource/add",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/rest/bi/datasource/list",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/rest/bi/datasource/edit",method:"put",data:t})}function u(t){return Object(n["a"])({url:"/rest/bi/datasource/delete/"+Object(r["d"])(t),method:"delete"})}function l(t){return Object(n["a"])({url:"/rest/bi/datasource/query/"+Object(r["d"])(t),method:"get"})}function h(){return Object(n["a"])({url:"/rest/bi/datasource/metatree",method:"get"})}function d(t){return Object(n["a"])({url:"/rest/bi/datasource/fields",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/rest/bi/datasource/fieldsById",method:"get",params:t})}function f(t){return Object(n["a"])({url:"/rest/bi/datasource/getTable/"+Object(r["d"])(t),method:"get"})}function p(t){return Object(n["a"])({url:"/rest/bi/datasource/saveTableConfig",method:"POST",data:t})}function b(t){return Object(n["a"])({url:"/rest/bi/meta/saveTableFieldConfig",method:"POST",data:t})}function g(t){return Object(n["a"])({url:"/rest/bi/meta/addtable",method:"POST",data:t})}function y(){return Object(n["a"])({url:"/rest/bi/meta/dowloadTemplate",method:"get"})}},bdaf:function(t,e,a){},c638:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"e",(function(){return i})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return s}));var n=a("b775");function r(t){return Object(n["a"])({url:"/rest/bi/chart/create",method:"POST",data:t})}function i(t){return Object(n["a"])({url:"/rest/bi/chart/update",method:"PUT",data:t})}function c(t){return Object(n["a"])({url:"/rest/bi/chart/tables/".concat(t)})}function o(t){return Object(n["a"])({url:"/rest/bi/chart/delete",method:"delete",params:t})}function s(t){return Object(n["a"])({url:"/rest/bi/chart/list",method:"get",params:t})}},e380:function(t,e,a){"use strict";a("bdaf")},edf6:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pane-container"},[a(t.currentType.componentName,{tag:"component",staticClass:"visualize-window",attrs:{data:t.chartData,schema:t.schema,"chart-style":t.chartStyle}}),t.isEditMode?a("div",{staticClass:"chart-style-panel"},[a("el-form",{attrs:{"label-position":"top",size:"mini"}},[a("el-form-item",{attrs:{label:t.$t("chart.chartType")+":"}},[a("div",{staticClass:"chart-type-list"},t._l(t.chartTypeList,(function(e){return a("span",{key:e.type,class:{activedIcon:e.type===t.chartType,disabledIcon:!t.isUsable(e)},on:{click:function(a){return t.switchChartType(e)}}},[a("el-tooltip",{attrs:{content:e.name+": "+e.matchRule.desc,placement:"top"}},[t._v("\n              "+t._s(t.isUsable(e)?e.icon:e.icon+"_disabled")+"\n              "),a("svg-icon",{staticClass:"icon",attrs:{"icon-class":t.isUsable(e)?e.icon:e.icon+"_disabled"}})],1)],1)})),0)])],1)],1):t._e()],1)},r=[],i=(a("7514"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",style:t.chartStyle})}),c=[],o=(a("8615"),a("7f7f"),a("6762"),a("ac6a"),a("4f7f"),a("5df3"),a("1c4c"),a("313e")),s=a.n(o);function u(t){return t/1e3>=.1&&t/1e4<1?t/1e3+"k":t/1e4>=1?t/1e4+"w":t}a("817d");var l={props:{widgetMeta:{required:!1,type:Object,default:function(){}},data:{required:!0,default:function(){}},schema:{type:Array,required:!0},chartOpt:{type:Object,required:!1},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}},data:function(){return{chart:null}},watch:{data:{deep:!0,handler:function(t){this.renderChart(t)}},schema:{deep:!0,handler:function(){this.renderChart(this.data)}}},mounted:function(){this.renderChart(this.data),this.$on("resized",this.handleResize),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.chart&&this.chart.dispose(),window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.chart&&this.chart.resize()},renderChart:function(t){var e=this;if(this.$refs.chart){var a=[],n=[],r={},i=this.schema.filter((function(t){return t.asxAxis})),c=this.schema.filter((function(t){return!t.asxAxis}))[0];2===i.length?(a=Array.from(new Set(t.map((function(t){return t[i[1].cname]})))),a.forEach((function(t){r[t]={name:t,data:[],type:"line"}})),t.forEach((function(t){n.includes(t[i[0].name])||n.push(t[i[0].name])})),n.forEach((function(e,n){a.forEach((function(a){var o=t.find((function(t){return t[i[0].name]===e&&t[i[1].name]===a}));r[a].data[n]=o?o[c.name]:void 0}))}))):this.schema.forEach((function(e,i){a.push(e.lable||e.name),e.asxAxis||(r[e.name]={name:e.lable||e.name,data:[],type:"line"}),t.forEach((function(t){e.asxAxis&&!n.includes(t[e.name])?n.push(t[e.name]):r[e.name].data.push(t[e.name])}))}));var o={legend:{bottom:0,type:"scroll",data:a},toolbox:{show:!0,itemSize:12,top:0,feature:{saveAsImage:{show:!0},magicType:{type:["line","bar"]},restore:{show:!0},dataZoom:{show:!0}}},grid:{top:"10px",left:"45px",right:"0",bottom:"45px"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},xAxis:{type:"category",axisLabel:{color:"#95a4bd"},axisLine:{lineStyle:{color:"#95a4bd"}},data:n},yAxis:{axisLabel:{show:!0,color:"#95a4bd",formatter:u},axisLine:{lineStyle:{color:"#95a4bd"}},splitLine:{lineStyle:{type:"dashed"}}},series:Object.values(r)};setTimeout((function(){e.chart||(e.chart=s.a.init(e.$refs.chart,"macarons")),e.chart.clear(),e.chart.setOption(o),e.chartOpt&&e.chart.setOption(e.chartOpt)}),0)}}}},h=l,d=a("2877"),m=Object(d["a"])(h,i,c,!1,null,null,null),f=m.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{style:t.chartStyle,attrs:{data:t.data,height:t.chartStyle.height,"highlight-current-row":"",border:"",stripe:"","header-cell-style":{padding:"5px 0"},"cell-style":{padding:"5px 0"}}},t._l(t.schema,(function(t){return a("el-table-column",{key:t.Column,attrs:{sortable:"",prop:t.Column,label:t.cname,align:"center"}})})),1)},b=[],g={props:{data:{type:Array,default:function(){return[]}},schema:{type:Array,default:function(){return[]}},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}}},y=g,v=Object(d["a"])(y,p,b,!1,null,null,null),x=v.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",style:t.chartStyle})},w=[];a("817d");var C={props:{data:{required:!0,default:function(){}},schema:{type:Array,required:!0},chartOpt:{type:Object,required:!1},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}},data:function(){return{chart:null}},watch:{data:{deep:!0,handler:function(t){this.renderChart(t)}},schema:{deep:!0,handler:function(){this.renderChart(this.data)}}},mounted:function(){this.renderChart(this.data),this.$on("resized",this.handleResize),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.chart&&this.chart.dispose(),window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.chart&&this.chart.resize()},renderChart:function(t){var e=this;if(this.$refs.chart){var a=[],n=[],r={};if(2===this.schema.filter((function(t){return t.asxAxis})).length){var i=this.schema.filter((function(t){return t.asxAxis})),c=i[0].name,o=i[1].name,l=this.schema.find((function(t){return!t.asxAxis})).name;n=this.data.map((function(t){return a.push(t[o]),t[c]})),n=Array.from(new Set(n)),a=Array.from(new Set(a)),a=a.map((function(e,a){var i=n.map((function(a){var n=t.find((function(t){return t[o]===e&&t[c]===a}));return n?n[l]:"-"}));return e+="",r[e]={name:e,data:i,type:"bar"},e}))}else this.schema.forEach((function(e,i){a.push(e.lable||e.cname),e.asxAxis||(r[e.name]={name:e.lable||e.name,data:[],type:"bar"}),t.forEach((function(t){e.asxAxis?n.push(t[e.name]):r[e.name].data.push(t[e.name])}))}));var h={legend:{bottom:0,type:"scroll",data:a},toolbox:{show:!0,top:0,itemSize:12,feature:{saveAsImage:{show:!0},magicType:{type:["line","bar"]},restore:{show:!0},dataZoom:{show:!0}}},grid:{top:"10px",left:"45px",right:"0",bottom:"45px"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",axisLabel:{color:"#95a4bd"},axisLine:{lineStyle:{color:"#95a4bd"}},splitArea:{show:!0,interval:0},data:n},yAxis:{axisLabel:{show:!0,color:"#95a4bd",formatter:u},axisLine:{lineStyle:{color:"#95a4bd"}},splitLine:{lineStyle:{type:"dashed"}}},series:Object.values(r)};setTimeout((function(){e.chart||(e.chart=s.a.init(e.$refs.chart,"macarons")),e.chart.clear(),e.chart.setOption(h),e.chartOpt&&e.chart.setOption(e.chartOpt)}),0)}}}},j=C,T=Object(d["a"])(j,O,w,!1,null,null,null),z=T.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",style:t.chartStyle})},S=[];a("817d");var E={props:{data:{required:!0,default:function(){}},schema:{type:Array,required:!0},chartOpt:{type:Object,required:!1},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}},data:function(){return{chart:null}},watch:{data:{deep:!0,handler:function(t){this.renderChart(t)}},schema:{deep:!0,handler:function(){this.renderChart(this.data)}}},mounted:function(){this.renderChart(this.data),this.$on("resized",this.handleResize),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.chart&&this.chart.dispose(),window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.chart&&this.chart.resize()},renderChart:function(t){var e=this;if(this.$refs.chart){var a=[],n=[],r={};this.schema.forEach((function(e,i){a.push(e.label||e.cname),e.asxAxis||(r[e.name]={name:e.lable||e.cname,data:[],stack:"All",type:"bar"}),t.forEach((function(t){e.asxAxis?n.push(t[e.name]):r[e.name].data.push(t[e.name])}))}));var i={legend:{type:"scroll",data:a,bottom:0},toolbox:{show:!0,top:0,itemSize:12,feature:{saveAsImage:{show:!0},magicType:{type:["line","bar"]},restore:{show:!0},dataZoom:{show:!0}}},grid:{top:"10px",left:"45px",right:"0",bottom:"45px"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},xAxis:{type:"category",axisLabel:{color:"#95a4bd"},axisLine:{lineStyle:{color:"#95a4bd"}},data:n},yAxis:{axisLabel:{show:!0,color:"#95a4bd",formatter:u},axisLine:{lineStyle:{color:"#95a4bd"}},splitLine:{lineStyle:{type:"dashed"}}},series:Object.values(r)};setTimeout((function(){e.chart||(e.chart=s.a.init(e.$refs.chart,"macarons")),e.chart.clear(),e.chart.setOption(i),e.chartOpt&&e.chart.setOption(e.chartOpt)}),0)}}}},R=E,L=Object(d["a"])(R,A,S,!1,null,null,null),q=L.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",style:t.chartStyle})},_=[];a("817d");var $={props:{widgetMeta:{required:!1,type:Object,default:function(){}},data:{required:!0,default:function(){}},schema:{type:Array,required:!0},chartOpt:{type:Object,required:!1},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}},data:function(){return{chart:null}},watch:{data:{deep:!0,handler:function(t){this.renderChart(t)}},schema:{deep:!0,handler:function(){this.renderChart(this.data)}}},mounted:function(){this.renderChart(this.data),this.$on("resized",this.handleResize),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.chart&&this.chart.dispose(),window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.chart&&this.chart.resize()},renderChart:function(t){var e=this;if(this.$refs.chart){if(0===t.length&&this.chart)return this.chart.clear(),void this.chart.setOption({graphic:[{type:"group",left:"center",top:"center",children:[{type:"text",z:100,left:"center",top:"middle",style:{fill:"#333",text:this.noDataDesc,font:"14px Microsoft YaHei"}}]}]});var a=[],n=[],r={};if(2===this.schema.filter((function(t){return t.asxAxis})).length){var i=this.schema.filter((function(t){return t.asxAxis})),c=i[0].name,o=i[1].lable,u=this.schema.find((function(t){return!t.asxAxis})).name;n=this.data.map((function(t){return a.push(t[o]),t[c]})),n=Array.from(new Set(n)),a=Array.from(new Set(a)),a=a.map((function(e,a){var i=n.map((function(a){var n=t.find((function(t){return t[o]===e&&t[c]===a}));return n?n[u]:"-"}));return e+="",r[e]={name:e,data:i,type:"bar"},e}))}else this.schema.forEach((function(e,i){a.push(e.lable||e.name),e.asxAxis||(r[e.name]={name:e.lable||e.name,data:[],type:"bar"}),t.forEach((function(t){e.asxAxis?n.push(t[e.name]):r[e.name].data.push(t[e.name])}))}));var l={legend:{bottom:0,type:"scroll",data:a},toolbox:{show:!0,feature:{saveAsImage:{show:!0},restore:{show:!0},dataZoom:{show:!1}}},grid:{top:"10%",left:"80px",bottom:"10%",right:"20px"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},xAxis:{type:"value",axisLabel:{color:"#95a4bd"},axisLine:{lineStyle:{color:"#95a4bd"}}},yAxis:{type:"category",data:n,axisLabel:{show:!0,color:"#95a4bd"},axisLine:{lineStyle:{color:"#95a4bd"}},splitLine:{lineStyle:{type:"dashed"}}},series:Object.values(r)};setTimeout((function(){e.chart||(e.chart=s.a.init(e.$refs.chart,"macarons")),e.chart.clear(),e.chart.setOption(l),e.chartOpt&&e.chart.setOption(e.chartOpt)}),0)}}}},D=$,B=Object(d["a"])(D,F,_,!1,null,null,null),N=B.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",style:t.chartStyle})},k=[];a("817d");var I={props:{data:{required:!0,default:function(){}},schema:{type:Array,required:!0},chartOpt:{type:Object,required:!1},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}},data:function(){return{chart:null}},watch:{data:{deep:!0,handler:function(t){this.renderChart(t)}},schema:{deep:!0,handler:function(){this.renderChart(this.data)}}},mounted:function(){this.renderChart(this.data),this.$on("resized",this.handleResize),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.chart&&this.chart.dispose(),window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.chart&&this.chart.resize()},renderChart:function(t){var e=this;if(this.$refs.chart&&t[0]){var a=[],n={};0===this.schema.filter((function(t){return t.asxAxis})).length?(n={name:"",type:"pie",radius:"55%",center:["50%","60%"],data:[],tooltip:{formatter:function(t){return"".concat(t.name,": ").concat(t.percent,"%")}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},t=t[0],this.schema.forEach((function(e,r){a.push(e.lable),n.data[r]=n.data[r]||{},n.data[r].name=e.name,n.data[r].value=t[e.name]}))):(n={name:"",type:"pie",radius:"55%",center:["50%","40%"],data:[],tooltip:{formatter:function(t){return"".concat(t.name,": ").concat(t.percent,"%")}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},this.schema.forEach((function(e,r){t.forEach((function(t,r){n.data[r]=n.data[r]||{},e.asxAxis?(a.push(t[e.name]),n.data[r].name=t[e.name]):n.data[r].value=t[e.name]}))})));var r={legend:{type:"scroll",data:a,bottom:0},toolbox:{show:!0,itemSize:12,feature:{saveAsImage:{show:!0},magicType:{type:["line","bar"]},restore:{show:!0},dataZoom:{show:!0}}},grid:{top:"10px",left:"80px",right:"0",bottom:"45px"},tooltip:{trigger:"item"},series:[n]};setTimeout((function(){e.chart||(e.chart=s.a.init(e.$refs.chart,"macarons")),e.chart.clear(),e.chart.setOption(r),e.chartOpt&&e.chart.setOption(e.chartOpt)}),0)}}}},P=I,U=Object(d["a"])(P,Q,k,!1,null,null,null),M=U.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:t.chartStyle},[a("div",{staticStyle:{"vertical-align":"middle","text-align":"center",display:"table-cell"}},[a("span",{staticStyle:{color:"#rgb(228, 11, 11)",fontSize:"35px"}},[t._v(t._s(t.numberValue))])])])},Z=[];a("a481");a("817d");var H={props:{data:{required:!0,numberValue:void 0,default:function(){}},schema:{type:Array,required:!0},chartOpt:{type:Object,required:!1},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}},data:function(){return{chart:null,list:[],title:"",numberValue:void 0}},watch:{data:{deep:!0,numberValue:void 0,handler:function(t){this.renderChart(t)}},schema:{deep:!0,handler:function(){this.renderChart(this.data)}}},mounted:function(){this.renderChart(this.data),this.$on("resized",this.handleResize),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.chart&&this.chart.dispose(),window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.chart&&this.chart.resize()},renderChart:function(t){if(t[0]){var e=t[0],a=this.schema[0].Column;this.title=this.schema[0].lable;var n=e[a]+"";this.numberValue=n.replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,")}}}},Y=H,X=(a("943b"),Object(d["a"])(Y,V,Z,!1,null,"ea0ea7a8",null)),J=X.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"myEchart",style:t.chartStyle,attrs:{id:"map"}})},G=[],K=a("53ca");a("3139"),a("bc3a");a("817d");var tt={props:{widgetMeta:{required:!1,type:Object,default:function(){}},data:{required:!0,default:function(){}},schema:{type:Array,required:!0},chartOpt:{type:Object,required:!1},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}},data:function(){return{provinces:["shanghai","hebei","shanxi","neimenggu","liaoning","jilin","heilongjiang","jiangsu","zhejiang","anhui","fujian","jiangxi","shandong","henan","hubei","hunan","guangdong","guangxi","hainan","sichuan","guizhou","yunnan","xizang","shanxi1","gansu","qinghai","ningxia","xinjiang","beijing","tianjin","chongqing","xianggang","aomen","taiwan"],provincesText:["上海","河北","山西","内蒙古","辽宁","吉林","黑龙江","江苏","浙江","安徽","福建","江西","山东","河南","湖北","湖南","广东","广西","海南","四川","贵州","云南","西藏","陕西","甘肃","青海","宁夏","新疆","北京","天津","重庆","香港","澳门","台湾"],map:{},province:""}},watch:{data:{deep:!0,handler:function(t){var e=this;this.data=t,this.$nextTick((function(){e.renderChart("china")})),this.map&&this.map.resize()}},schema:{deep:!0,handler:function(){this.renderChart("china")}}},mounted:function(){var t=this;this.$nextTick((function(){t.renderChart("china")})),this.$on("resized",this.handleResize),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.map&&this.map.dispose(),window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.map&&this.map.resize()},getMapOpt:function(t){var e={tooltip:{trigger:"item",formatter:function(t){if(t["data"])return"".concat(t["name"],"</br>").concat(t["data"].label,": (").concat(t["value"],")")},position:"inside"},dataRange:{show:!1,min:0,max:1e3,text:["High","Low"],realtime:!0,calculable:!0,color:["orangered","yellow","lightskyblue"]},geo:{map:t||"china",roam:!0,label:{normal:{show:!0,textStyle:{color:"rgba(0,0,0)"}}},itemStyle:{normal:{borderColor:"rgba(0, 0, 0, 0.2)"},emphasis:{areaColor:null,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:20,borderWidth:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},series:[{type:"scatter",coordinateSystem:"geo"},{type:"map",geoIndex:0,data:this.data}]};return e},showChinaMap:function(){this.map.dispose(),this.renderChart()},renderChart:function(t){var e=this;if(1===this.schema.filter((function(t){return t.asxAxis})).length){var a=this.schema.filter((function(t){return t.asxAxis})),n=a[0].name,r=this.schema.find((function(t){return!t.asxAxis})).lable,i=this.schema.find((function(t){return!t.asxAxis})).name;this.data.map((function(t){t.name=t[n],t.value=t[i],t.label=r})),this.map=s.a.init(document.getElementById("map"),"macarons"),window.onresize=this.map.resize,this.map.showLoading();var c=this.getMapOpt(t);c&&"object"===Object(K["a"])(c)&&(this.map.setOption(c,!0),setTimeout((function(){e.map.hideLoading()}),500))}else{this.map=s.a.init(document.getElementById("map"),"macarons"),window.onresize=this.map.resize,this.map.showLoading();var o=this.getMapOpt(t);o&&"object"===Object(K["a"])(o)&&(this.map.setOption(o,!0),setTimeout((function(){e.map.hideLoading()}),500))}}}},et=tt,at=(a("e380"),Object(d["a"])(et,W,G,!1,null,null,null)),nt=at.exports,rt=a("9225"),it=a("aa35");function ct(t,e){var a=t.map((function(t){var a={};return e.forEach((function(e){e.calculFunc?e.lable="".concat(e.cname,"(").concat(it["c"][e.calculFunc],")"):e.lable="".concat(e.cname),e.name=e.Column,e.asxAxis=e.isDimension,a[e.Column]=t[e.Column]})),a}));return a}var ot=[{name:rt["a"].t("chartType.table"),icon:"chart_table",type:"table",matchRule:{desc:rt["a"].t("chartType.tableDesc"),isUsable:function(t,e){return!0}},componentName:"DataTable",dataTransfer:function(t,e){var a=t.map((function(t){var a={};return e.forEach((function(e){e.calculFunc?e.name="".concat(e.cname,"(").concat(it["c"][e.calculFunc],")"):e.name="".concat(e.cname),a[e.Column]=t[e.Column]})),a}));return a}},{name:rt["a"].t("chartType.line"),icon:"chart_line",type:"line",matchRule:{desc:rt["a"].t("chartType.lineDesc"),isUsable:function(t,e){return(1===t.length||2===t.length)&&e.length>=1}},componentName:"lineChart",dataTransfer:ct},{name:rt["a"].t("chartType.bar"),icon:"chart_bar",type:"bar",matchRule:{desc:rt["a"].t("chartType.barDesc"),isUsable:function(t,e){return(1===t.length||2===t.length)&&e.length>=1}},componentName:"BarChart",dataTransfer:ct},{name:rt["a"].t("chartType.number"),icon:"chart_number",type:"number",matchRule:{desc:rt["a"].t("chartType.numberDesc"),isUsable:function(t,e){return 1==e.length}},componentName:"number",dataTransfer:ct},{name:rt["a"].t("chartType.stackBar"),icon:"stack_bar",type:"stackBar",matchRule:{desc:rt["a"].t("chartType.stackBarDesc"),isUsable:function(t,e){return(1===t.length||2===t.length)&&e.length>=2}},componentName:"StackBarChart",dataTransfer:ct},{name:rt["a"].t("chartType.pie"),icon:"chart_pie",type:"pie",matchRule:{desc:rt["a"].t("chartType.pieDesc"),isUsable:function(t,e){return 1===t.length&&1===e.length||0===t.length&&e.length>=1}},componentName:"PieChart",dataTransfer:ct},{name:rt["a"].t("chartType.horizontalBar"),icon:"horizontal_bar",type:"horizontalBar",matchRule:{desc:rt["a"].t("chartType.horizontalBarDesc"),isUsable:function(t,e){return(1===t.length||2===t.length)&&e.length>=1}},componentName:"HorizontalBar",dataTransfer:ct},{name:rt["a"].t("chartType.map"),icon:"chart_map",type:"mapchina",matchRule:{desc:rt["a"].t("chartType.mapDesc"),isUsable:function(t,e){return 1===t.length&&1==e.length}},componentName:"MapChart",dataTransfer:ct}],st=ot,ut=a("f0ee"),lt={components:{lineChart:f,DataTable:x,BarChart:z,StackBarChart:q,number:J,PieChart:M,HorizontalBar:N,MapChart:nt},props:{data:{type:Array,required:!0},schema:{type:Array,required:!0},chartStyle:{require:!1,type:Object},chartType:{type:String,default:"table"},isEditMode:{type:Boolean,default:!0}},data:function(){return{chartTypeList:st}},computed:{allSelected:function(){return ut["a"].state.caculCols.concat(ut["a"].state.dimensions)},chartData:function(){return this.currentType.dataTransfer?this.currentType.dataTransfer(this.data,this.schema):this.data},currentType:function(){var t=this;return st.find((function(e){return e.type===t.chartType}))}},watch:{allSelected:{deep:!0,handler:function(){this.currentType.matchRule.isUsable(ut["a"].state.dimensions,ut["a"].state.caculCols)||this.$emit("update:chartType","table")}}},methods:{isUsable:function(t){return t.matchRule.isUsable(ut["a"].state.dimensions,ut["a"].state.caculCols)},switchChartType:function(t){t.matchRule.isUsable(ut["a"].state.dimensions,ut["a"].state.caculCols)&&this.$emit("update:chartType",t.type)}}},ht=lt,dt=(a("8034"),Object(d["a"])(ht,n,r,!1,null,"6d16fe44",null));e["a"]=dt.exports},f0ee:function(t,e,a){"use strict";a("20d6");var n=a("a5e0"),r=a("aa35"),i={debug:!1,state:{dimensions:[],caculCols:[],allCols:[]},addDimensionAction:function(t){this.debug&&console.log("adddimensionAction triggered with",t),t.isDimension=!0},deleteDimensionAction:function(t){this.debug&&console.log("deleteDimensionAction triggered with",t);var e=this.state.dimensions.findIndex((function(e){return e.Column===t.Column}));this.state.dimensions[e].isDimension=!1,this.state.dimensions.splice(e,1)},setDimensionsAction:function(t){this.debug&&console.log("setDimensionsAction triggered"),this.state.dimensions=t},addCaculColAction:function(t){this.debug&&console.log("addCaculColAction triggered with",t);var e=Object(n["c"])(t.Type),a=this.state.caculCols.findIndex((function(e){return e.Column===t.Column})),i={Column:t.Column,cname:t.cname,calculFunc:e.availableFunc[0],Type:t.Type,availableFunc:e.availableFunc.map((function(t){return{name:r["c"][t],func:t}}))};this.state.caculCols.splice(a,1,i)},deleteCaculColAction:function(t){this.debug&&console.log("deleteCaculColAction triggered with",t);var e=this.state.caculCols.findIndex((function(e){return e.Column===t.Column}));this.state.caculCols.splice(e,1)},setCaculColsAction:function(t){this.debug&&console.log("setCaculColsAction triggered"),this.state.caculCols=t},setAllColsAction:function(t){this.debug&&console.log("setAllColsAction triggered width",t),this.state.allCols=t}};e["a"]=i},f77d:function(t,e,a){"use strict";a.d(e,"b",(function(){return c}));var n=a("b775"),r=a("bc3a"),i=a.n(r);function c(t){return Object(n["a"])({url:"/rest/bi/exec/exec",method:"POST",data:t})}e["a"]=function(){var t=i.a.CancelToken.source();return{cancel:function(){t.cancel("cancel")},fetch:function(t){return Object(n["a"])({url:"/rest/bi/exec/exec",method:"POST",data:t})}}}}}]);